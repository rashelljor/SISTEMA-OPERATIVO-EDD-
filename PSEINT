Proceso SistemaGestionProcesos
    
    // Declaracion de variables globales
    Definir opcion Como Entero
    Definir continuar Como Logico
    Definir ID, prioridad, bloqueMemoria Como Entero
    Definir nombre Como Cadena
    Definir existeID, existeBloque, procesoValido Como Logico
    Definir i, j Como Entero
    
    // Dimensionar arreglos para simular estructuras (maximo 100 procesos)
    Dimension listaProcesosID[100]
    Dimension listaProcesosNombre[100]
    Dimension listaProcesosPrioridad[100]
    Dimension listaProcesosMemoria[100]
    Dimension colaEjecucionID[100]
    Dimension pilaMemoriaID[100]
    Dimension pilaMemoriaBloque[100]
    
    // Inicializar contadores (simular punteros)
    contadorProcesos <- 0
    contadorCola <- 0
    contadorPila <- 0
    
    // Variable para controlar el bucle principal
    continuar <- Verdadero
    
    // Bucle principal del menu
    Mientras continuar Hacer
        
        // Limpiar pantalla y mostrar menu
        Limpiar Pantalla
        Escribir "----------------------------------------------------------"
        Escribir "-    SISTEMA DE GESTION DE PROCESOS - GRUPO C           -"
        Escribir "-    Estructura de Datos - NRC: 62159                   -"
        Escribir "----------------------------------------------------------"
        Escribir ""
        Escribir "----------------------------------------------------------"
        Escribir "-                    MENU PRINCIPAL                      -"
        Escribir "----------------------------------------------------------"
        Escribir "-  1. Agregar Nuevo Proceso                              -"
        Escribir "-  2. Mostrar Lista de Procesos                          -"
        Escribir "-  3. Mostrar Cola de Ejecucion                          -"
        Escribir "-  4. Mostrar Estado de Memoria                          -"
        Escribir "-  5. Ejecutar Proceso (Desencolar)                      -"
        Escribir "-  6. Eliminar Proceso                                   -"
        Escribir "-  0. Salir del Sistema                                  -"
        Escribir "----------------------------------------------------------"
        Escribir ""
        Escribir "Procesos Activos: ", contadorProcesos
        Escribir "Procesos en Cola: ", contadorCola
        Escribir "Bloques de Memoria Ocupados: ", contadorPila
        Escribir ""
        Escribir "Seleccione una opcion: " Sin Saltar
        Leer opcion
        
        // Procesar la opcion seleccionada
        Segun opcion Hacer
            
            Caso 1:
                // ========== OPCION 1: AGREGAR PROCESO ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-              AGREGAR NUEVO PROCESO                     -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                
                // Entrada de datos
                Escribir "Ingrese el ID del proceso (numero entero unico):"
                Leer ID
                
                Escribir "Ingrese el nombre del proceso:"
                Leer nombre
                
                Escribir "Ingrese la prioridad (1 = mas alta, 2, 3, 4...):"
                Leer prioridad
                
                Escribir "Ingrese el bloque de memoria a asignar (numero entero unico):"
                Leer bloqueMemoria
                
                // Validaciones
                procesoValido <- Verdadero
                
                // Validar que el ID sea positivo
                Si ID <= 0 Entonces
                    Escribir "ERROR: El ID debe ser un numero positivo mayor que 0"
                    procesoValido <- Falso
                FinSi
                
                // Validar que la prioridad sea positiva
                Si prioridad <= 0 Entonces
                    Escribir "ERROR: La prioridad debe ser un numero positivo (1 o mayor)"
                    procesoValido <- Falso
                FinSi
                
                // Validar que el bloque de memoria sea positivo
                Si bloqueMemoria <= 0 Entonces
                    Escribir "ERROR: El bloque de memoria debe ser un numero positivo"
                    procesoValido <- Falso
                FinSi
                
                // Validar que el nombre no este vacio
                Si Longitud(nombre) = 0 Entonces
                    Escribir "ERROR: El nombre del proceso no puede estar vacio"
                    procesoValido <- Falso
                FinSi
                
                // Validar duplicados de ID
                Si procesoValido Entonces
                    existeID <- Falso
                    Para i <- 1 Hasta contadorProcesos Con Paso 1 Hacer
                        Si listaProcesosID[i] = ID Entonces
                            existeID <- Verdadero
                        FinSi
                    FinPara
                    
                    Si existeID Entonces
                        Escribir "ERROR: Ya existe un proceso con el ID ", ID
                        procesoValido <- Falso
                    FinSi
                FinSi
                
                // Validar duplicados de bloque de memoria
                Si procesoValido Entonces
                    existeBloque <- Falso
                    Para i <- 1 Hasta contadorPila Con Paso 1 Hacer
                        Si pilaMemoriaBloque[i] = bloqueMemoria Entonces
                            existeBloque <- Verdadero
                        FinSi
                    FinPara
                    
                    Si existeBloque Entonces
                        Escribir "ERROR: El bloque de memoria ", bloqueMemoria, " ya esta ocupado"
                        procesoValido <- Falso
                    FinSi
                FinSi
                
                // Si todas las validaciones pasaron, registrar el proceso
                Si procesoValido Entonces
                    
                    // 1. INSERTAR EN LISTA ENLAZADA (al final)
                    contadorProcesos <- contadorProcesos + 1
                    listaProcesosID[contadorProcesos] <- ID
                    listaProcesosNombre[contadorProcesos] <- nombre
                    listaProcesosPrioridad[contadorProcesos] <- prioridad
                    listaProcesosMemoria[contadorProcesos] <- bloqueMemoria
                    Escribir "+ Proceso insertado en la lista enlazada"
                    
                    // 2. ASIGNAR MEMORIA (PUSH en pila)
                    contadorPila <- contadorPila + 1
                    pilaMemoriaID[contadorPila] <- ID
                    pilaMemoriaBloque[contadorPila] <- bloqueMemoria
                    Escribir "+ Bloque de memoria ", bloqueMemoria, " asignado al proceso ", ID
                    
                    // 3. ENCOLAR POR PRIORIDAD
                    Si contadorCola = 0 Entonces
                        contadorCola <- 1
                        colaEjecucionID[1] <- ID
                    Sino
                        Definir posInsercion, prioridadActual Como Entero
                        posInsercion <- 0
                        
                        Para i <- 1 Hasta contadorCola Con Paso 1 Hacer
                            Para j <- 1 Hasta contadorProcesos Con Paso 1 Hacer
                                Si listaProcesosID[j] = colaEjecucionID[i] Entonces
                                    prioridadActual <- listaProcesosPrioridad[j]
                                FinSi
                            FinPara
                            
                            Si prioridad <= prioridadActual Y posInsercion = 0 Entonces
                                posInsercion <- i
                            FinSi
                        FinPara
                        
                        Si posInsercion = 0 Entonces
                            contadorCola <- contadorCola + 1
                            colaEjecucionID[contadorCola] <- ID
                        Sino
                            Para i <- contadorCola Hasta posInsercion Con Paso -1 Hacer
                                colaEjecucionID[i + 1] <- colaEjecucionID[i]
                            FinPara
                            colaEjecucionID[posInsercion] <- ID
                            contadorCola <- contadorCola + 1
                        FinSi
                    FinSi
                    Escribir "+ Proceso encolado en el planificador con prioridad ", prioridad
                    
                    // Mensaje de exito
                    Escribir ""
                    Escribir "====================================================="
                    Escribir "         PROCESO REGISTRADO EXITOSAMENTE"
                    Escribir "====================================================="
                    Escribir "ID:              ", ID
                    Escribir "Nombre:          ", nombre
                    Escribir "Prioridad:       ", prioridad
                    Escribir "Memoria:         Bloque ", bloqueMemoria
                    Escribir "====================================================="
                    
                Sino
                    Escribir ""
                    Escribir "X No se pudo agregar el proceso debido a errores de validacion"
                FinSi
                
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
            Caso 2:
                // ========== OPCION 2: MOSTRAR LISTA DE PROCESOS ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-            LISTA DE PROCESOS ACTIVOS                   -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                
                Si contadorProcesos = 0 Entonces
                    Escribir "- No hay procesos registrados en el sistema"
                Sino
                    Escribir "----------------------------------------------------"
                    Escribir " ID        NOMBRE         PRIORIDAD    MEMORIA"
                    Escribir "----------------------------------------------------"
                    Para i <- 1 Hasta contadorProcesos Con Paso 1 Hacer
                        Escribir " ", listaProcesosID[i], "  ", listaProcesosNombre[i], "        ", listaProcesosPrioridad[i], "       Bloque ", listaProcesosMemoria[i]
                    FinPara
                    Escribir "----------------------------------------------------"
                    Escribir ""
                    Escribir "Total de procesos: ", contadorProcesos
                FinSi
                
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
            Caso 3:
                // ========== OPCION 3: MOSTRAR COLA DE EJECUCION ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-          COLA DE EJECUCION (Planificador CPU)          -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                
                Si contadorCola = 0 Entonces
                    Escribir "- La cola de ejecucion esta vacia"
                Sino
                    Escribir "Orden de ejecucion (de mayor a menor prioridad):"
                    Escribir ""
                    Definir idCola Como Entero
                    Para i <- 1 Hasta contadorCola Con Paso 1 Hacer
                        idCola <- colaEjecucionID[i]
                        
                        // Buscar datos del proceso
                        Para j <- 1 Hasta contadorProcesos Con Paso 1 Hacer
                            Si listaProcesosID[j] = idCola Entonces
                                Escribir i, ". Proceso ID: ", idCola, " - ", listaProcesosNombre[j], " (Prioridad: ", listaProcesosPrioridad[j], ")"
                            FinSi
                        FinPara
                    FinPara
                    Escribir ""
                    Escribir "Total en cola: ", contadorCola, " proceso(s)"
                FinSi
                
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
            Caso 4:
                // ========== OPCION 4: MOSTRAR ESTADO DE MEMORIA ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-           ESTADO DE MEMORIA (Pila LIFO)                -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                
                Si contadorPila = 0 Entonces
                    Escribir "- No hay bloques de memoria asignados"
                Sino
                    Escribir "Bloques de memoria ocupados (LIFO - ultimo en entrar, primero en salir):"
                    Escribir ""
                    // Mostrar desde el tope de la pila (ultimo elemento)
                    Para i <- contadorPila Hasta 1 Con Paso -1 Hacer
                        Escribir "Bloque ", pilaMemoriaBloque[i], " - Proceso ID: ", pilaMemoriaID[i]
                    FinPara
                    Escribir ""
                    Escribir "Total de bloques ocupados: ", contadorPila
                FinSi
                
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
            Caso 5:
                // ========== OPCION 5: EJECUTAR PROCESO ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-              EJECUTAR PROCESO (Desencolar)             -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                Escribir "Esta funcionalidad se implementara en la siguiente entrega..."
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
            Caso 6:
                // ========== OPCION 6: ELIMINAR PROCESO ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-                 ELIMINAR PROCESO                       -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                Escribir "Esta funcionalidad se implementara en la siguiente entrega..."
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
            Caso 0:
                // ========== SALIR DEL SISTEMA ==========
                Limpiar Pantalla
                Escribir "----------------------------------------------------------"
                Escribir "-         Gracias por usar el Sistema de Gestion         -"
                Escribir "-                    Grupo C - NRC 62159                 -"
                Escribir "----------------------------------------------------------"
                Escribir ""
                Escribir "Saliendo del sistema..."
                continuar <- Falso
                
            De Otro Modo:
                // ========== OPCION INVALIDA ==========
                Limpiar Pantalla
                Escribir "X ERROR: Opcion no valida"
                Escribir ""
                Escribir "Por favor, seleccione una opcion entre 0 y 6"
                Escribir ""
                Escribir "Presione ENTER para volver al menu..."
                Esperar Tecla
                
        FinSegun
        
    FinMientras
    
FinProceso
